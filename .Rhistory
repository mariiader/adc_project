eins <- eins + abs(vec1)
}
if (vec2>0){
zwei <- zwei - vec2
} else {
zwei <- zwei + abs(vec2)
}
print(c(eins, zwei))
i <- i+1
}
}
calc(0,0,0.2)
calc <- function(x,y,rate){
eins <- x
zwei <- y
i <- 0
while (i<50) {
vec1 <- f1(eins, zwei)*rate
vec2 <- f2(eins, zwei)*rate
if (vec1>0){
eins <- eins - vec1
} else {
eins <- eins + abs(vec1)
}
if (vec2>0){
zwei <- zwei - vec2
} else {
zwei <- zwei + abs(vec2)
}
print(c(eins, zwei))
i <- i+1
}
}
calc(0,0,0.2)
calc(0,0,0.1)
calc <- function(x,y,rate){
eins <- x
zwei <- y
i <- 0
while (i<30) {
vec1 <- f1(eins, zwei)*rate
vec2 <- f2(eins, zwei)*rate
if (vec1>0){
eins <- eins - vec1
} else {
eins <- eins + abs(vec1)
}
if (vec2>0){
zwei <- zwei - vec2
} else {
zwei <- zwei + abs(vec2)
}
print(c(eins, zwei))
i <- i+1
}
}
calc <- function(x,y,rate){
eins <- x
zwei <- y
i <- 0
while (i<20) {
vec1 <- f1(eins, zwei)*rate
vec2 <- f2(eins, zwei)*rate
if (vec1>0){
eins <- eins - vec1
} else {
eins <- eins + abs(vec1)
}
if (vec2>0){
zwei <- zwei - vec2
} else {
zwei <- zwei + abs(vec2)
}
print(c(eins, zwei))
print(f0(eins,zwei))
i <- i+1
}
}
calc(0,0,0.2)
calc <- function(x,y,rate){
eins <- x
zwei <- y
i <- 0
while (i<20) {
print(f0(eins,zwei))
vec1 <- f1(eins, zwei)*rate
vec2 <- f2(eins, zwei)*rate
if (vec1>0){
eins <- eins - vec1
} else {
eins <- eins + abs(vec1)
}
if (vec2>0){
zwei <- zwei - vec2
} else {
zwei <- zwei + abs(vec2)
}
print(c(eins, zwei))
i <- i+1
}
}
calc(0,0,0.2)
f1 <- function(x,y){
a <- 4*x - 2
return(a)
}
f2 <- function(x,y){
b <- 2*y - 1
return(b)
}
calc(0,0,0.2)
calc <- function(x,y,rate){
eins <- x
zwei <- y
i <- 0
while (i<20) {
vec1 <- f1(eins, zwei)*rate
vec2 <- f2(eins, zwei)*rate
if (vec1>0){
eins <- eins - vec1
} else {
eins <- eins + abs(vec1)
}
if (vec2>0){
zwei <- zwei - vec2
} else {
zwei <- zwei + abs(vec2)
}
print(c(i, f0(eins, zwei), eins, zwei))
i <- i+1
}
}
calc(0,0,0.2)
calc <- function(x,y,rate){
eins <- x
zwei <- y
i <- 0
while (i<20) {
vec1 <- f1(eins, zwei)*rate
vec2 <- f2(eins, zwei)*rate
if (vec1>0){
eins <- eins - vec1
} else {
eins <- eins + abs(vec1)
}
if (vec2>0){
zwei <- zwei - vec2
} else {
zwei <- zwei + abs(vec2)
}
print(c(i, f0(eins, zwei), eins, zwei, vec1, vec2))
i <- i+1
}
}
calc(0,0,0.2)
seq(0.5,4.5,0.5)
seq(0.5,4.5,0.5)^2
exp((-(1)^2)/0.5)
exp((-(0)^2)/0.5)
library(MASS)
val1 <- c(1,1,1,1,1,exp(-2), exp(-2),  exp(-4),  exp(-4),  exp(-2),  exp(-2), 1)
matr <- matrix(val1, nrow=4, ncol=3)
matr
ginv(matr)
pi1 <- ginv(matr) #MPPI
matr1 <- matrix(val1, nrow=4, ncol=3)
out1m <- matrix(out1, nrow=4, ncol=1)
out1 <- c(1,0,0,1)
out1m <- matrix(out1, nrow=4, ncol=1)
pi1 %*% out1m
out1 <- c(0,0,0,1)
out1m <- matrix(out1, nrow=4, ncol=1)
pi1 %*% out1m
rm(matr)
val2 <- c(1,1,1,1, exp(-4), exp(-2), exp(-2),  1)
matr2 <- matrix(val2, nrow=4, ncol=2)
pi2 <- ginv(matr2) #MPPI
pi2
pi2 %*% out1m
step <- pi2 %*% out1m
step <- step %*% out1m
step
exp(-4)
50/16
exp(-(8/25))
k <- exp(-(8/25))
l <- exp(-(32/25))
val1 <- c(1,1,1,1,1, k, 1, l, k, k, l, 1, k)
out1 <- c(0,1,1,0)
matr1 <- matrix(val1, nrow=4, ncol=3)
out1m <- matrix(out1, nrow=4, ncol=1)
val1 <- c(1,1,1,1, k, 1, l, k, k, l, 1, k)
matr1 <- matrix(val1, nrow=4, ncol=3)
out1m <- matrix(out1, nrow=4, ncol=1)
pi1 <- ginv(matr1)
pi1 %*% out1m
pi1
val2 <- c(1,1,1,1, k, 1, 1, k)
matr2 <- matrix(val2, nrow=4, ncol=2)
pi2 <- ginv(matr2) #MPPI
step <- pi2 %*% out1m
step
pi2
file1 <- data.frame()
file1$A <- rnorm(10,0,1)
file1 <- data.frame(matrix(vector(), 10, 10, dimnames=list(c(),c("A","B","C","D","E","F","G","H","I","J"))),
stringsAsFactors = F)
rnorm(10,0,1)
file1$A <- rnorm(10,0,1)
file1$A <- rnorm(10,0,1)
file1$B <- rnorm(10,1,1)
file1$C <- rnorm(10,2,1)
file1$D <- rnorm(10,3,1)
file1$E <- rnorm(10,4,1)
file1$F <- rnorm(10,5,1)
file1$G <- rnorm(10,6,1)
file1$H <- rnorm(10,7,1)
file1$I <- rnorm(10,8,1)
file1$J <- rnorm(10,9,1)
file2 <- data.frame(matrix(vector(), 10, 10, dimnames=list(c(),c("A","B","C","D","E","F","G","H","I","J"))),
stringsAsFactors = F)
file2$A <- rnorm(10,0,1)
file2$B <- rnorm(10,1,1)
file2$C <- rnorm(10,2,1)
file2$D <- rnorm(10,3,1)
file2$E <- rnorm(10,4,1)
file2$F <- rnorm(10,5,1)
file2$G <- rnorm(10,6,1)
file2$H <- rnorm(10,7,1)
file2$I <- rnorm(10,8,1)
file2$J <- rnorm(10,9,1)
write.csv(file1,
"C:/Users/hendr/Documents/Uni_Konstanz/Master/Semester_4/MA-Arbeit/GitRepo/umbrella/src/test/resources/data/example/file1.csv",
sep=",")
write.csv(file1,
"C:/Users/hendr/Documents/Uni_Konstanz/Master/Semester_4/MA-Arbeit/GitRepo/umbrella/src/test/resources/data/example/file1.csv",
row.names = F)
write.csv(file2,
"C:/Users/hendr/Documents/Uni_Konstanz/Master/Semester_4/MA-Arbeit/GitRepo/umbrella/src/test/resources/data/example/file2.csv",
row.names = F)
write.csv(file3,
"C:/Users/hendr/Documents/Uni_Konstanz/Master/Semester_4/MA-Arbeit/GitRepo/umbrella/src/test/resources/data/example/file3.csv",
row.names = F)
file3 <- data.frame(matrix(vector(), 10, 10, dimnames=list(c(),c("A1","B2","C3","D4","E5","F6","G7","H8","I9","J0"))),
stringsAsFactors = F)
file3$A1 <- rnorm(10,0,1)
file3$B2 <- rnorm(10,1,1)
file3$C3 <- rnorm(10,2,1)
file3$D4 <- rnorm(10,3,1)
file3$E5 <- rnorm(10,4,1)
file3$F6 <- rnorm(10,5,1)
file3$G7 <- rnorm(10,6,1)
file3$H8 <- rnorm(10,7,1)
file3$I9 <- rnorm(10,8,1)
file3$J0 <- rnorm(10,9,1)
write.csv(file3,
"C:/Users/hendr/Documents/Uni_Konstanz/Master/Semester_4/MA-Arbeit/GitRepo/umbrella/src/test/resources/data/example/file3.csv",
row.names = F)
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv")
plot(kernel)
plot(kernel ~ seq(-5,5,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(kernel ~ seq(-5,5,0.1))
length(seq(-5,5,0.1))
plot(kernel$V1 ~ seq(-5,5,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(kernel$V1 ~ seq(-5,5,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(kernel$V1 ~ seq(-7,7,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(exp(kernel$V1) ~ seq(-7,7,0.1))
exp(-744)
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(exp(kernel$V1) ~ seq(-7,7,0.1))
plot(kernel$V1 ~ seq(-7,7,0.1))
exp(12)
exp(-2.00e+12)
exp(-1.2e+13)
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(kernel$V1 ~ seq(-7,7,0.1))
plot(exp(kernel$V1) ~ seq(-7,7,0.1))
exp(e)
exp(log(3))
log(10)
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(exp(kernel$V1) ~ seq(-7,7,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(exp(kernel$V1) ~ seq(-7,7,0.1))
sum(exp(kernel$V1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(exp(kernel$V1)/10 ~ seq(-7,7,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(exp(kernel$V1) ~ seq(-7,7,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(exp(kernel$V1) ~ seq(-7,7,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(kernel$V1 ~ seq(-7,7,0.1))
sum(exp(kernel$V1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(exp(kernel$V1) ~ seq(-7,7,0.1))
sum(exp(kernel$V1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(exp(kernel$V1) ~ seq(-7,7,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(exp(kernel$V1) ~ seq(-7,7,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(exp(kernel$V1) ~ seq(-7,7,0.1))
plot(kernel$V1 ~ seq(-7,7,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(kernel$V1 ~ seq(-7,7,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(kernel$V1 ~ seq(-7,7,0.1))
kernel <- read.csv("C:/Users/hendr/Desktop/Kernel.csv", header = F)
plot(kernel$V1 ~ seq(-7,7,0.1))
2 %% 1.5
2 %% 1.52
14 %% 1.52
rm(kernel)
u1 <- read.csv("C:/Users/hendr/Documents/Uni_Konstanz/Master/Semester_4/MA-Arbeit/GitRepo/umbrella/src/test/resources/data/ucdpged/ged19-release.csv", sep=",")
which(is.na(u1))
u1 <- read.csv("C:/Users/hendr/Documents/Uni_Konstanz/Master/Semester_4/MA-Arbeit/GitRepo/umbrella/src/test/resources/data/ucdpged/ged19-release.csv", sep=",", stringsAsFactors = F)
?write.csv
write.csv(u1, "C:/Users/hendr/Documents/Uni_Konstanz/Master/Semester_4/MA-Arbeit/GitRepo/umbrella/src/test/resources/data/ucdpged/UPged19-release.csv", sep=", ", row.names = FALSE)
load("~/Uni_Konstanz/Master/Semester_4/Challenge/gitRepo/adc_project/WorkspaceSoAbend.RData")
dfSjOutShort <- dfSjOut[500:700,]
summary(mDynLag <- dynlm(total_cases ~ L(reanalysis_dew_point_temp_k, 9) +
L(reanalysis_specific_humidity_g_per_kg, 9) +
L(station_avg_temp_c, 11) +
L(station_min_temp_c, 11) +
#year #+
L(reanalysis_precip_amt_kg_per_m2, 2) #+
, data=dfSjOutShort))
library(foreign)
library(dplyr)
library(MASS)
library(ggplot2)
library(zoo)
library(forecast)
library(corrgram)
library(dynlm)
library(astsa)
summary(mDynLag <- dynlm(total_cases ~ L(reanalysis_dew_point_temp_k, 9) +
L(reanalysis_specific_humidity_g_per_kg, 9) +
L(station_avg_temp_c, 11) +
L(station_min_temp_c, 11) +
#year #+
L(reanalysis_precip_amt_kg_per_m2, 2) #+
, data=dfSjOutShort))
dfSjOutLag <- cbind(dfSjOut[10:934,14], #precip
dfSjOut[3:927, c(11,17)], #dew humid
dfSjOut[1:925, c(19,22)],  # avg min
dfSjOut[12:936,c(2,3,24)]) # year week total
names(dfSjOutLag)[1] <- "reanalysis_precip_amt_kg_per_m2"
predDynSj <- predict(mDynLag, newdata = dfSjOut[701:936,], type = "response")
mean(abs(dfSjOut[701:936,24]-(predDyn)))
mean(abs(dfSjOut[701:936,24]-(predDynSj)))
plotComp(c(dfSjOut[701:936,24]),
predDynSj)
dfSjOutLag <- cbind(dfSjOut[10:934,14], #precip
#dfSjOut[10:934,14], #total lagged
dfSjOut[3:927, c(11,17)], #dew humid
dfSjOut[1:925, c(19,22,24)],  # avg min
dfSjOut[12:936,c(2,3,24)]) # year week total
names(dfSjOutLag)[1] <- "reanalysis_precip_amt_kg_per_m2"
names(dfSjOutLag)[6] <- "total_cases_Lag"
mNBSj <- glm.nb(total_cases ~
reanalysis_dew_point_temp_k + #9
reanalysis_specific_humidity_g_per_kg + #9
station_avg_temp_c +  #11
station_min_temp_c + #,  #11
total_cases_Lag,
data=dfSjOutLag[400:700,])
predNB <- predict(mNBSj, dfSjOutLag[701:925,], type ="response")
mean(abs(predNB[12:225]-dfSjOutLag$total_cases[701:914]))
plotComp(dfSjOutLag$total_cases[701:914], predNB[12:225])
forwardSj <- dfSjOutLag[701:925,1:8]
forwardSj$total_cases_Lag[12:nrow(forwardSj)] <- 0
predForw <- NULL
for (i in 1:nrow(forwardSj)){
thisPred <- predict(mNBSj, forwardSj[i,], type ="response")
if (i < nrow(forwardSj)-11){
forwardSj$total_cases_Lag[11+i] <- thisPred
}
predForw <- c(predForw, thisPred)
}
mean(abs(predForw-dfSjOutLag$total_cases[701:925]))
mNBSj <- glm.nb(total_cases ~
reanalysis_dew_point_temp_k + #9
reanalysis_specific_humidity_g_per_kg + #9
station_avg_temp_c +  #11
station_min_temp_c + #,  #11
total_cases_Lag,
data=dfSjOutLag[500:700,])
predNB <- predict(mNBSj, dfSjOutLag[701:925,], type ="response")
mean(abs(predNB[12:225]-dfSjOutLag$total_cases[701:914]))
forwardSj <- dfSjOutLag[701:925,1:8]
forwardSj$total_cases_Lag[12:nrow(forwardSj)] <- 0
predForw <- NULL
for (i in 1:nrow(forwardSj)){
thisPred <- predict(mNBSj, forwardSj[i,], type ="response")
if (i < nrow(forwardSj)-11){
forwardSj$total_cases_Lag[11+i] <- thisPred
}
predForw <- c(predForw, thisPred)
}
mean(abs(predForw-dfSjOutLag$total_cases[701:925]))
plotComp(predForw, dfSjOut$total_cases[701:925])
summary(mDynLagIq <- dynlm(total_cases ~ L(reanalysis_dew_point_temp_k, 11) +
L(reanalysis_specific_humidity_g_per_kg, 11) +
L(station_avg_temp_c, 14) +
L(station_min_temp_c, 10) +
#year #+
L(reanalysis_precip_amt_kg_per_m2, 2) #+
# L(total_cases, 1)
, data=dfIqOut)) # Short
predDynIq <- predict(mDynLagIq, newdata = dfIqOut, type = "response")
mean(abs(dfIqOut$total_cases-predDynIq))
dfIqOutShort <- dfSjOut[1:300,]
summary(mDynLagIq <- dynlm(total_cases ~ L(reanalysis_dew_point_temp_k, 11) +
L(reanalysis_specific_humidity_g_per_kg, 11) +
L(station_avg_temp_c, 14) +
L(station_min_temp_c, 10) +
#year #+
L(reanalysis_precip_amt_kg_per_m2, 2) #+
# L(total_cases, 1)
, data=dfIqOutShort)) # Short
predDynIq <- predict(mDynLagIq, newdata = dfIqOut[301:519], type = "response")
predDynIq <- predict(mDynLagIq, newdata = dfIqOut[301:519,], type = "response")
mean(abs(dfIqOut$total_cases-predDynIq))
mean(abs(dfIqOut[301:519,]$total_cases-predDynIq))
fitsj <- rpart(total_cases ~ reanalysis_precip_amt_kg_per_m2 + reanalysis_dew_point_temp_k +
reanalysis_specific_humidity_g_per_kg + station_avg_temp_c   +
station_min_temp_c,
method="poisson", data=dfSjOutLag[650:925,], control=rpart.control(minsplit=50, cp=0.001))
library(rpart)
library(randomForest)
plot(fitsj, uniform=T)
text(fitsj, use.n=TRUE, all=TRUE, cex=0.8)
plot(fitsj, uniform=T, margin=0.2)
text(fitsj, use.n=TRUE, all=TRUE, cex=0.8)
treepredSj <- predict(fitsj, newdata=dfSjOutLag[701:925,])
mean(abs(dfSjOutLag$total_cases[701:925] - treepredSj))
plotComp(c(dfSjOutLag$total_cases[701:925]),
treepredSj)
fitspike <- rpart(Spike ~ .,
method="poisson", data=dfSjOutLagSpike[,c(1:5,7:8,10)], control=rpart.control(minsplit=5, minbucket=1))
spikePred <- predict(fitspike, newdata=dfSjOutLagSpike[1:925,])*200
mean(abs(dfSjOutLag$total_cases[1:925] - rep(0,925)))
plotComp(c(dfSjOutLagSpike$total_cases[1:925]),
spikePred)
plot(fit, uniform=T, margin=0.2)
text(fit, use.n=TRUE, all=TRUE, cex=0.8)
plot(fitspike, uniform=T, margin=0.2)
text(fitspike, use.n=TRUE, all=TRUE, cex=0.8)
fitspike <- rpart(Spike ~ .,
method="case", data=dfSjOutLagSpike[,c(1:5,7:8,10)], control=rpart.control(minsplit=5, minbucket=1))
?rpart
fitspike <- rpart(Spike ~ .,
method="class", data=dfSjOutLagSpike[,c(1:5,7:8,10)], control=rpart.control(minsplit=5, minbucket=1))
spikePred <- predict(fitspike, newdata=dfSjOutLagSpike[1:925,])*200
plotComp(c(dfSjOutLagSpike$total_cases[1:925]),
spikePred)
spikePred <- predict(fitspike, newdata=dfSjOutLagSpike[1:925,])
mean(abs(dfSjOutLag$total_cases[1:925] - rep(0,925)))
plotComp(c(dfSjOutLagSpike$total_cases[1:925]),
spikePred)
plotComp(c(dfSjOutLagSpike$total_cases[1:925]),
spikePred[1])
plotComp(c(dfSjOutLagSpike$total_cases[1:925]),
spikePred[1]*100)
plot(fitspike, uniform=T, margin=0.2)
text(fitspike, use.n=TRUE, all=TRUE, cex=0.8)
fitspike <- rpart(Spike ~ .,
method="class", data=dfSjOutLagSpike[,c(1:5,7:8,10)])
spikePred <- predict(fitspike, newdata=dfSjOutLagSpike[1:925,])
plotComp(c(dfSjOutLagSpike$total_cases[1:925]),
spikePred[1]*100)
summary(spikePred)
spikePred
plotComp(c(dfSjOutLagSpike$total_cases[1:925]),
spikePred[2]*100)
spikePred[2]*100
plotComp(c(dfSjOutLagSpike$total_cases[1:925]),
spikePred[,2]*100)
plotComp(SjApprox$real,
predict(fitspike, newdata=dfTsjOutLag)*50)
plotComp(SjApprox$real,
predict(fitspike, newdata=dfTsjOutLag)[,2]*50)
plot(fitspike, uniform=T, margin=0.2)
text(fitspike, use.n=TRUE, all=TRUE, cex=0.8)
mean(abs(predForw-dfSjOutLag$total_cases[701:925]))
plotComp(predForw, dfSjOut$total_cases[701:925])
library(foreign)
library(dplyr)
library(MASS)
library(ggplot2)
library(zoo)
library(forecast)
library(corrgram)
library(dynlm)
library(astsa)
#Import as Time Series
setwd("C:/Users/hendr/Documents/Uni_Konstanz/Master/Semester_4/Challenge/gitRepo/adc_project")
load("~/Uni_Konstanz/Master/Semester_4/Challenge/gitRepo/adc_project/WorkspaceSoAbend.RData")
sum(is.na.data.frame(trainIq))
sum(is.na.data.frame(trainSj))
1455*24
528/34920
mean(abs(predForw-SjApprox$real), na.rm = T)
SjApprox$real
mean(abs(predForw[88:260]-SjApprox$real[88:260]), na.rm = T)
mean(c(dfSjOut$total_cases,dfIqOut$total_cases))
